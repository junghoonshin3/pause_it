{\rtf1\ansi\ansicpg949\cocoartf2867
\cocoatextscaling0\cocoaplatform0{\fonttbl\f0\froman\fcharset0 Times-Roman;}
{\colortbl;\red255\green255\blue255;\red0\green0\blue0;}
{\*\expandedcolortbl;;\cssrgb\c0\c0\c0;}
\paperw11900\paperh16840\margl1440\margr1440\vieww11520\viewh8400\viewkind0
\deftab720
\pard\pardeftab720\partightenfactor0

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 name: Deploy to Firebase App Distribution\
\
on:\
  push:\
    branches: [ "main", "develop" ] # develop\uc0\u51008  dev, main\u51008  prod\u47196  \u48176 \u54252 \
\
jobs:\
  build:\
    runs-on: ubuntu-latest\
    steps:\
      - uses: actions/checkout@v4\
\
      # 1. \uc0\u54872 \u44221  \u49444 \u51221  (Java, Flutter, Ruby)\
      - uses: actions/setup-java@v4\
        with: \{ distribution: 'zulu', java-version: '17' \}\
      - uses: subosito/flutter-action@v2\
        with: \{ channel: 'stable', cache: true \}\
      - uses: ruby/setup-ruby@v1\
        with: \{ ruby-version: '3.2', working-directory: android, bundler-cache: true \}\
\
      # 2. \uc0\u51064 \u51613  \u54028 \u51068  \u48373 \u50896 \
      - name: Create Auth Files\
        run: |\
          echo "$\{\{ secrets.FIREBASE_SERVICE_ACCOUNT_JSON \}\}" > android/firebase_credentials.json\
          echo "$\{\{ secrets.ANDROID_KEYSTORE_BASE64 \}\}" | base64 --decode > android/app/upload-key.jks\
          echo "$\{\{ secrets.ANDROID_KEY_PROPERTIES \}\}" > android/key.properties\
\
      # 3. \uc0\u48652 \u47004 \u52824 \u50640  \u46384 \u47480  \u48176 \u54252 \
      - name: Deploy to Dev\
        if: github.ref == 'refs/heads/develop'\
        run: bundle exec fastlane dev\
        working-directory: android\
        env:\
          FIREBASE_APP_ID_DEV: $\{\{ secrets.FIREBASE_APP_ID_DEV \}\}\
\
      - name: Deploy to Prod\
        if: github.ref == 'refs/heads/main'\
        run: bundle exec fastlane prod\
        working-directory: android\
        env:\
          FIREBASE_APP_ID_PROD: $\{\{ secrets.FIREBASE_APP_ID_PROD \}\}}